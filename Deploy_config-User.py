import paramiko
import time

ip_list = [
    '172.30.246.57','172.30.246.58','172.23.84.6','172.23.84.7','172.23.84.8','172.23.84.9',
    '172.23.84.10','172.23.84.11','172.23.84.12','172.23.84.13','172.23.84.14','172.23.84.15',
    '172.23.84.16','172.23.84.17','172.23.84.18','172.23.84.19','172.23.84.20','172.23.84.21',
    '172.23.84.22','172.23.84.23','172.23.84.24','172.23.84.25','172.23.84.26','172.23.84.27',
    '172.23.84.28','172.23.84.29','172.23.84.30','172.23.84.96','172.23.84.94','172.23.84.95',
    '172.23.84.97','172.22.252.6','172.22.252.7','172.22.252.8','172.22.252.9','172.22.252.10',
    '172.22.252.11','172.22.252.12','172.22.252.13','172.22.252.14','172.22.252.15','172.22.252.16',
    '172.22.252.17','172.22.252.18','172.22.252.19','172.22.252.20','172.22.252.21','172.22.252.22',
    '172.22.252.23','172.22.252.24','172.22.252.25','172.22.252.26','172.22.252.27','172.22.252.28',
    '172.22.252.29','172.22.252.30','172.22.252.31','172.22.252.32','172.22.252.33','172.22.252.34',
    '172.22.252.35','172.22.252.36','172.23.84.31','172.23.84.32','172.23.84.33','172.23.84.34',
    '172.23.84.35','172.23.84.36','172.23.84.37','172.23.84.38','172.23.84.39','172.23.84.40',
    '172.23.84.41','172.23.84.42','172.23.84.93','172.23.84.43','172.23.84.44','172.23.84.45',
    '172.23.84.46','172.23.84.47','172.23.84.48','172.23.84.49','172.23.84.50','172.23.84.51',
    '172.23.84.52','172.23.84.53','172.23.84.54','172.23.84.55','172.23.84.56','172.23.84.57',
    '172.23.84.58','172.23.84.59','172.23.84.60','172.23.84.61','172.23.84.62','172.23.84.63',
    '172.23.84.64','172.23.84.65','172.23.84.66','172.23.84.67','172.23.84.68','172.23.84.69',
    '172.23.84.70','172.23.84.71','172.23.84.72','172.23.84.73','172.23.84.74','172.23.84.75',
    '172.23.84.76','172.23.84.77','172.23.84.78','172.23.84.79','172.23.84.80','172.23.84.81',
    '172.23.84.82','172.23.84.83','172.23.84.84','172.23.84.85','172.23.84.86','172.23.84.87',
    '172.23.84.88','172.23.84.89','172.23.84.90','172.23.84.91','172.23.84.92'
]
username = "admin"
password = "1Net@5cG2024"

COMMANDS = [
    "configure terminal",
    "user jakapat.jo group administrators password plaintext 1Net@SCGnetwork01",
    "user bunyakorn.ko group administrators password plaintext 1Net@SCG222",
    "user teerawat.ju group administrators password plaintext 1Net@TrW#21",
    "user paithawat.sa group administrators password plaintext 1Net@Infra01",
    "end",
    "write memory"
]

def send_commands(ip, commands):
    print(f"\n--- Connecting to {ip} ---")
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(ip, username=username, password=password, look_for_keys=False, allow_agent=False)
    remote = ssh.invoke_shell()
    time.sleep(1)
    remote.recv(9999)

    for cmd in commands:
        remote.send(cmd + "\n")
        time.sleep(1)  # wait for command execution
        output = remote.recv(9999).decode(errors="ignore")
        print(output)

    ssh.close()

if __name__ == "__main__":
    for ip in ip_list:
        send_commands(ip, COMMANDS)
    print("\nAll commands sent. Exiting now.")
